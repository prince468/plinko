window.AQCore=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=18)}([function(e,t,r){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=l(e),n=r[0],i=r[1],s=new a(function(e,t,r){return 3*(t+r)/4-r}(0,n,i)),u=0,c=i>0?n-4:n,f=0;f<c;f+=4)t=o[e.charCodeAt(f)]<<18|o[e.charCodeAt(f+1)]<<12|o[e.charCodeAt(f+2)]<<6|o[e.charCodeAt(f+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;2===i&&(t=o[e.charCodeAt(f)]<<2|o[e.charCodeAt(f+1)]>>4,s[u++]=255&t);1===i&&(t=o[e.charCodeAt(f)]<<10|o[e.charCodeAt(f+1)]<<4|o[e.charCodeAt(f+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t);return s},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,a=[],i=0,s=r-o;i<s;i+=16383)a.push(c(e,i,i+16383>s?s:i+16383));1===o?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=i.length;s<u;++s)n[s]=i[s],o[i.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var o,a,i=[],s=t;s<r;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(n[(a=o)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCallbackHelper=t.CallbackHelper=void 0;var n,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),s=(n=i)&&n.__esModule?n:{default:n},u=r(16);var l=t.CallbackHelper=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uiCallbacks={},this.coreCallbacks={},this.errorCallbacks={}}return a(e,[{key:"postToWebKit",value:function(e,t){window.webkit.messageHandlers[e].postMessage(t)}},{key:"postToAndroidAqApp",value:function(e,t){window.aqJsPostMessage(e,t)}},{key:"postToSimulator",value:function(e,t){window.parent&&window.parent.postMessage({messageType:"aqMiniAppSdk",message:e,param:t},"*")}},{key:"setUiCallback",value:function(e,t,r){var n=this.uiCallbacks[e];void 0===n&&(n={}),n[t]=r,this.uiCallbacks[e]=n}},{key:"setCoreCallback",value:function(e,t){this.coreCallbacks[e]=t}},{key:"setErrorCallback",value:function(e,t){this.errorCallbacks[e]=t}},{key:"processMessage",value:function(e,t,r){var n=o({},r);t&&(n.key=t),void 0!==window.webkit?this.postToWebKit(e,n):void 0!==window.aqJsPostMessage?this.postToAndroidAqApp(e,n):void 0!==window.parent&&this.postToSimulator(e,n)}}]),e}();function c(e,t){var r=e;if(t){var n=s.default.toByteArray(e),o=new u.TextDecoder("utf-8").decode(n);r=JSON.parse(o)}return r}window.funTypeCallback=function(e,t,r,n){if(null!=f.uiCallbacks[e]){var o=f.uiCallbacks[e];if(null!=o[t])(0,o[t])(t,c(r,n))}else if(null!=f.coreCallbacks[e]){(0,f.coreCallbacks[e])(c(r,n))}},window.errorCallback=function(e,t,r){null!=f.errorCallbacks[e]&&(0,f.errorCallbacks[e])(c(t,r))},window.addEventListener("message",function(e){var t=e.origin||e.originalEvent.origin,r=e.data;if("aqMiniAppSdk"!==r.messageType)return;if("localhost"!==location.hostname&&"127.0.0.1"!==location.hostname&&!window.aqAppSimulatorConfirmed&&!confirm("AQ MiniApp Simulator from "+t+" is trying to access this fun type. Allow access?"))return;window.aqAppSimulatorConfirmed=!0;var n=r.message,o=r.key,a=r.value,i=r.shouldDecode;n&&window.funTypeCallback(n,o,a,i)},!1);var f=new l;t.defaultCallbackHelper=f},function(e,t,r){"use strict";var n,o,a=r(9),i=r(8),s=0,u=0;e.exports=function(e,t,r){var l=t&&r||0,c=t||[],f=(e=e||{}).node||n,h=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==h){var d=a();null==f&&(f=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=o=16383&(d[6]<<8|d[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),y=void 0!==e.nsecs?e.nsecs:u+1,v=p-s+(y-u)/1e4;if(v<0&&void 0===e.clockseq&&(h=h+1&16383),(v<0||p>s)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,u=y,o=h;var b=(1e4*(268435455&(p+=122192928e5))+y)%4294967296;c[l++]=b>>>24&255,c[l++]=b>>>16&255,c[l++]=b>>>8&255,c[l++]=255&b;var g=p/4294967296*1e4&268435455;c[l++]=g>>>8&255,c[l++]=255&g,c[l++]=g>>>24&15|16,c[l++]=g>>>16&255,c[l++]=h>>>8|128,c[l++]=255&h;for(var _=0;_<6;++_)c[l+_]=f[_];return t||i(c)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};n.DEV_BASE_URL="http://v2.dev.api.bengga.com/2.0",n.LIVE_BASE_URL="http://v2.dev.api.bengga.com/2.0",t.default=n},function(e,t,r){"use strict";!function(e){if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=function(e){return e&&DataView.prototype.isPrototypeOf(e)},o=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};c.prototype.append=function(e,t){e=s(e),t=u(t);var r=this.map[e];this.map[e]=r?r+","+t:t},c.prototype.delete=function(e){delete this.map[s(e)]},c.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},c.prototype.set=function(e,t){this.map[s(e)]=u(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),l(e)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),l(e)},c.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),l(e)},t.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var a=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var i=[301,302,303,307,308];g.redirect=function(e,t){if(-1===i.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=c,e.Request=v,e.Response=g,e.fetch=function(e,r){return new Promise(function(n,o){var a=new v(e,r),i=new XMLHttpRequest;i.onload=function(){var e,t,r={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new c,e.split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}}),t)};r.url="responseURL"in i?i.responseURL:r.headers.get("X-Request-URL");var o="response"in i?i.response:i.responseText;n(new g(o,r))},i.onerror=function(){o(new TypeError("Network request failed"))},i.ontimeout=function(){o(new TypeError("Network request failed"))},i.open(a.method,a.url,!0),"include"===a.credentials&&(i.withCredentials=!0),"responseType"in i&&t.blob&&(i.responseType="blob"),a.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send(void 0===a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var r={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(r[Symbol.iterator]=function(){return r}),r}function c(e){this.map={},e instanceof c?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function d(e){var t=new FileReader,r=h(t);return t.readAsArrayBuffer(e),r}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&n(e))this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!o(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e,t,r,n=f(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=h(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}function v(e,t){var r,n,o=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),a.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:void 0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(13);var o=i(r(12)),a=i(r(3));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"devt";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.basePath=t,this.credentials=r,this.environment=n}return n(e,[{key:"getAuthHeader",value:function(e,t,r){return o.default.client.header(e,t,{credentials:r,ext:"aq-miniapp-core"}).field}},{key:"checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;throw new Error(e.statusText)}},{key:"parseJSON",value:function(e){var t=this;return e.json().then(function(e){return t.isDevt()&&console.log(""+JSON.stringify(e)),e})}},{key:"isDevt",value:function(){return"devt"===this.environment}},{key:"getFullUrl",value:function(e){return this.isDevt()?a.default.DEV_BASE_URL+"/"+this.basePath+e:a.default.LIVE_BASE_URL+"/"+this.basePath+e}},{key:"jsonize",value:function(e){return e.then(this.checkStatus).then(this.parseJSON)}},{key:"request",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.getFullUrl(t);this.isDevt()&&console.log(e+" "+n);var o={method:e,headers:{Authorization:this.getAuthHeader(n,e,this.credentials),"Content-Type":"application/json"},mode:"cors"};return this.isDevt(),"GET"!==e&&"HEAD"!==e&&(o.body=JSON.stringify(r)),fetch(n,o).then(this.checkStatus).then(this.parseJSON.bind(this))}}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=i(r(0)),a=i(r(2));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"generateId",value:function(){var e=new Array(16);return(0,a.default)(null,e,0),o.default.fromByteArray(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},{key:"relativeToAbsolutePath",value:function(e){for(var t,r,n="",o=window.location.pathname.replace(/[^\/]*$/,e.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),a=0;(r=o.indexOf("/../",a))>-1;a=r+t)t=/^\/(?:\.\.\/)*/.exec(o.slice(r))[0].length,n=(n+o.substring(a,r)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(t-1)/3+"}$"),"/");return window.location.origin+n+o.substr(a)}}]),e}();t.default=s=new s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Leaderboard=t.LeaderboardScoreSortOrder=t.LeaderboardScoreType=void 0;var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(5),i=(n=a)&&n.__esModule?n:{default:n};t.LeaderboardScoreType={INT:0,DECIMAL:1,DURATION:2,COMPLETION:3,RECENT:4},t.LeaderboardScoreSortOrder={ASCENDING:0,DESCENDING:1};var s="";t.Leaderboard=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"devt";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,{id:e.id,key:e.key,algorithm:"sha256"},r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"create",value:function(e,t){var r="engagement/"+e+"/leaderboard";return this.request("POST",r,t)}},{key:"add",value:function(e,t){var r="engagement/"+e+"/leaderboard";return this.request("PUT",r,t)}}]),t}()},function(e,t,r){"use strict";for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]}},function(e,t,r){"use strict";var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var o=new Uint8Array(16);e.exports=function(){return n(o),o}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultLifeCycle=t.Messages=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(0)),i=u(r(2)),s=r(1);function u(e){return e&&e.__esModule?e:{default:e}}var l=t.Messages={MESSAGE_SHOW_TITLE_INPUT:"showTitleInput",MESSAGE_SHOW_WEB_IMAGE_SELECTOR:"showWebImageSelector",MESSAGE_SHOW_GALLERY_IMAGE_SELECTOR:"showGalleryImageSelector",MESSAGE_SHOW_FRIENDS_SELECTOR:"showFriendsSelector",MESSAGE_SET_APP_DATA:"setAppData",MESSAGE_INFORM_READY:"informReady",MESSAGE_SHOW_PREVIEW_WITH_DATA:"showPreviewWithData",MESSAGE_REQUEST_PREVIEW:"requestPreview",MESSAGE_ON_DATA:"onData",MESSAGE_GET_FRIENDS:"getFriends",MESSAGE_GET_BM_BALANCE:"getBmBalance",MESSAGE_PUBLISH:"publish",MESSAGE_PUBLISH_STATUS:"publishStatus",MESSAGE_JOIN:"join",MESSAGE_START:"start",MESSAGE_END:"end",MESSAGE_RESET:"reset"},c=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._callbackHelper=t}return o(e,[{key:"_saveCallbackAndProcessMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t&&this._callbackHelper.setCoreCallback(e,t),this._callbackHelper.processMessage(e,null,r)}},{key:"setOnDataCallback",value:function(e){this._callbackHelper.setCoreCallback(l.MESSAGE_ON_DATA,e)}},{key:"setOnResetCallback",value:function(e){this._callbackHelper.setCoreCallback(l.MESSAGE_RESET,e)}},{key:"setRequestPreviewCallback",value:function(e){this._callbackHelper.setCoreCallback(l.MESSAGE_REQUEST_PREVIEW,e)}},{key:"setPublishCallback",value:function(e){this._callbackHelper.setCoreCallback(l.MESSAGE_PUBLISH,e)}},{key:"sendMessage",value:function(e,t){this._saveCallbackAndProcessMessage(e,null,t)}},{key:"showPreviewWithData",value:function(e,t,r){this._saveCallbackAndProcessMessage(l.MESSAGE_SHOW_PREVIEW_WITH_DATA,null,n({title:e,coverImageUrl:t},r))}},{key:"setAppData",value:function(e){this._saveCallbackAndProcessMessage(l.MESSAGE_SET_APP_DATA,null,{appData:e})}},{key:"informReady",value:function(){this._saveCallbackAndProcessMessage(l.MESSAGE_INFORM_READY,null,null)}},{key:"generateId",value:function(){var e=new Array(16);return(0,i.default)(null,e,0),a.default.fromByteArray(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},{key:"join",value:function(e,t,r,n){this._saveCallbackAndProcessMessage(l.MESSAGE_JOIN,null,{id:e,joinImageUrl:t,winCriteriaPassed:r,notificationItem:n})}},{key:"start",value:function(){this._saveCallbackAndProcessMessage(l.MESSAGE_START,null,null)}},{key:"end",value:function(){this._saveCallbackAndProcessMessage(l.MESSAGE_END,null,null)}},{key:"publishSucceded",value:function(){this._saveCallbackAndProcessMessage(l.MESSAGE_PUBLISH_STATUS,null,{status:!0})}},{key:"publishFailed",value:function(){this._saveCallbackAndProcessMessage(l.MESSAGE_PUBLISH_STATUS,null,{status:!1})}}]),e}())(s.defaultCallbackHelper);t.defaultLifeCycle=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaStorage=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(4);var o=i(r(0)),a=i(r(3));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e.status>=200&&e.status<300)return e;throw new Error(e.statusText)}function u(e){return e.json()}t.MediaStorage=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"devt";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.environment=t}return n(e,[{key:"_getFullUrl",value:function(e){return"devt"===this.environment?a.default.DEV_BASE_URL+"/media"+e:a.default.LIVE_BASE_URL+"/media"+e}},{key:"_jsonize",value:function(e){return e.then(s).then(u)}},{key:"_request",value:function(e,t,r){var n=this._getFullUrl(t),o={method:e,mode:"cors"};return"GET"!==e&&"HEAD"!==e&&(o.body=r.data,o.headers={"Content-Type":r.contentType}),fetch(n,o).then(s).then(u)}},{key:"upload",value:function(e){return this._request("POST","",e)}},{key:"get",value:function(e){return this._request("GET","/"+e)}},{key:"base64DataUrlToByteArray",value:function(e){var t=/data:(.*);base64,(.*)/gi.exec(e);return 3==t.length?{data:o.default.toByteArray(t[2]),contentType:t[1]}:null}}]),e}()},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},a={internals:{}};a.client={header:function(e,t,r){var n={field:"",artifacts:{}};if(!e||"string"!=typeof e&&"object"!==(void 0===e?"undefined":o(e))||!t||"string"!=typeof t||!r||"object"!==(void 0===r?"undefined":o(r)))return n.err="Invalid argument type",n;var i=r.timestamp||a.utils.nowSec(r.localtimeOffsetMsec),s=r.credentials;if(!(s&&s.id&&s.key&&s.algorithm))return n.err="Invalid credentials object",n;if(-1===a.crypto.algorithms.indexOf(s.algorithm))return n.err="Unknown algorithm",n;"string"==typeof e&&(e=a.utils.parseUri(e));var u={ts:i,nonce:r.nonce||a.utils.randomString(6),method:t,resource:e.resource,host:e.host,port:e.port,hash:r.hash,ext:r.ext,app:r.app,dlg:r.dlg};n.artifacts=u,u.hash||!r.payload&&""!==r.payload||(u.hash=a.crypto.calculatePayloadHash(r.payload,s.algorithm,r.contentType));var l=a.crypto.calculateMac("header",s,u),c=null!==u.ext&&void 0!==u.ext&&""!==u.ext,f='Hawk id="'+s.id+'", ts="'+u.ts+'", nonce="'+u.nonce+(u.hash?'", hash="'+u.hash:"")+(c?'", ext="'+a.utils.escapeHeaderAttribute(u.ext):"")+'", mac="'+l+'"';return u.app&&(f+=', app="'+u.app+(u.dlg?'", dlg="'+u.dlg:"")+'"'),n.field=f,n},bewit:function(e,t){if(!e||"string"!=typeof e||!t||"object"!==(void 0===t?"undefined":o(t))||!t.ttlSec)return"";t.ext=null===t.ext||void 0===t.ext?"":t.ext;var r=a.utils.nowSec(t.localtimeOffsetMsec),n=t.credentials;if(!(n&&n.id&&n.key&&n.algorithm))return"";if(-1===a.crypto.algorithms.indexOf(n.algorithm))return"";e=a.utils.parseUri(e);var i=r+t.ttlSec,s=a.crypto.calculateMac("bewit",n,{ts:i,nonce:"",method:"GET",resource:e.resource,host:e.host,port:e.port,ext:t.ext}),u=n.id+"\\"+i+"\\"+s+"\\"+t.ext;return a.utils.base64urlEncode(u)},authenticate:function(e,t,r,n){n=n||{};var o=function(t){return e.headers?"function"==typeof e.headers.get?e.headers.get(t):e.headers[t]:e.getResponseHeader?e.getResponseHeader(t):e.getHeader(t)},i=o("www-authenticate");if(i){var s=a.utils.parseAuthorizationHeader(i,["ts","tsm","error"]);if(!s)return!1;if(s.ts){if(a.crypto.calculateTsMac(s.ts,t)!==s.tsm)return!1;a.utils.setNtpSecOffset(s.ts-Math.floor(Date.now()/1e3))}}var u=o("server-authorization");if(!u&&!n.required)return!0;var l=a.utils.parseAuthorizationHeader(u,["mac","ext","hash"]);if(!l)return!1;var c={ts:r.ts,nonce:r.nonce,method:r.method,resource:r.resource,host:r.host,port:r.port,hash:l.hash,ext:l.ext,app:r.app,dlg:r.dlg};return a.crypto.calculateMac("response",t,c)===l.mac&&(!n.payload&&""!==n.payload||!!l.hash&&a.crypto.calculatePayloadHash(n.payload,t.algorithm,o("content-type"))===l.hash)},message:function(e,t,r,n){if(!e||"string"!=typeof e||!t||"number"!=typeof t||null===r||void 0===r||"string"!=typeof r||!n||"object"!==(void 0===n?"undefined":o(n)))return null;var i=n.timestamp||a.utils.nowSec(n.localtimeOffsetMsec),s=n.credentials;if(!(s&&s.id&&s.key&&s.algorithm))return null;if(-1===a.crypto.algorithms.indexOf(s.algorithm))return null;var u={ts:i,nonce:n.nonce||a.utils.randomString(6),host:e,port:t,hash:a.crypto.calculatePayloadHash(r,s.algorithm)};return{id:s.id,ts:u.ts,nonce:u.nonce,hash:u.hash,mac:a.crypto.calculateMac("message",s,u)}},authenticateTimestamp:function(e,t,r){return a.crypto.calculateTsMac(e.ts,t)===e.tsm&&(!1!==r&&a.utils.setNtpSecOffset(e.ts-Math.floor(Date.now()/1e3)),!0)}},a.crypto={headerVersion:"1",algorithms:["sha1","sha256"],calculateMac:function(e,t,r){var n=a.crypto.generateNormalizedString(e,r);return c["Hmac"+t.algorithm.toUpperCase()](n,t.key).toString(c.enc.Base64)},generateNormalizedString:function(e,t){var r="hawk."+a.crypto.headerVersion+"."+e+"\n"+t.ts+"\n"+t.nonce+"\n"+(t.method||"").toUpperCase()+"\n"+(t.resource||"")+"\n"+t.host.toLowerCase()+"\n"+t.port+"\n"+(t.hash||"")+"\n";return t.ext&&(r+=t.ext.replace("\\","\\\\").replace("\n","\\n")),r+="\n",t.app&&(r+=t.app+"\n"+(t.dlg||"")+"\n"),r},calculatePayloadHash:function(e,t,r){var n=c.algo[t.toUpperCase()].create();return n.update("hawk."+a.crypto.headerVersion+".payload\n"),n.update(a.utils.parseContentType(r)+"\n"),n.update(e),n.update("\n"),n.finalize().toString(c.enc.Base64)},calculateTsMac:function(e,t){return c["Hmac"+t.algorithm.toUpperCase()]("hawk."+a.crypto.headerVersion+".ts\n"+e+"\n",t.key).toString(c.enc.Base64)}},a.internals.LocalStorage=function(){this._cache={},this.length=0,this.getItem=function(e){return this._cache.hasOwnProperty(e)?String(this._cache[e]):null},this.setItem=function(e,t){this._cache[e]=String(t),this.length=Object.keys(this._cache).length},this.removeItem=function(e){delete this._cache[e],this.length=Object.keys(this._cache).length},this.clear=function(){this._cache={},this.length=0},this.key=function(e){return Object.keys(this._cache)[e||0]}},a.utils={storage:new a.internals.LocalStorage,setStorage:function(e){var t=a.utils.storage.getItem("hawk_ntp_offset");a.utils.storage=e,t&&a.utils.setNtpSecOffset(t)},setNtpSecOffset:function(e){try{a.utils.storage.setItem("hawk_ntp_offset",e)}catch(e){console.error("[hawk] could not write to storage."),console.error(e)}},getNtpSecOffset:function(){var e=a.utils.storage.getItem("hawk_ntp_offset");return e?parseInt(e,10):0},now:function(e){return Date.now()+(e||0)+1e3*a.utils.getNtpSecOffset()},nowSec:function(e){return Math.floor(a.utils.now(e)/1e3)},escapeHeaderAttribute:function(e){return e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},parseContentType:function(e){return e?e.split(";")[0].replace(/^\s+|\s+$/g,"").toLowerCase():""},parseAuthorizationHeader:function(e,t){if(!e)return null;var r=e.match(/^(\w+)(?:\s+(.*))?$/);if(!r)return null;if("hawk"!==r[1].toLowerCase())return null;var n=r[2];if(!n)return null;var o={};return""!==n.replace(/(\w+)="([^"\\]*)"\s*(?:,\s*|$)/g,function(e,r,n){if(-1!==t.indexOf(r)&&null!==n.match(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~]+$/)&&!o.hasOwnProperty(r))return o[r]=n,""})?null:o},randomString:function(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=t.length,n=[],o=0;o<e;++o)n[o]=t[Math.floor(Math.random()*r)];return n.join("")},uriRegex:/^([^:]+)\:\/\/(?:[^@/]*@)?([^\/:]+)(?:\:(\d+))?([^#]*)(?:#.*)?$/,parseUri:function(e){var t=e.match(a.utils.uriRegex);if(!t)return{host:"",port:"",resource:""};var r=t[1].toLowerCase();return{host:t[2],port:t[3]||("http"===r?"80":"https"===r?"443":""),resource:t[4]}},base64urlEncode:function(e){var t=c.enc.Utf8.parse(e);return c.enc.Base64.stringify(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}};var i,s,u,l,c=c||function(e,t){var r={},n=r.lib={},o=function(){},a=n.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},i=n.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var o=0;o<e;o++)t[n+o>>>2]|=(r[o>>>2]>>>24-o%4*8&255)<<24-(n+o)%4*8;else if(65535<r.length)for(var a=0;a<e;a+=4)t[n+a>>>2]=r[a>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;n<t;n+=4)r.push(4294967296*e.random()|0);return new i.init(b,t)}}),s=r.enc={},u=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++){var o=t[n>>>2]>>>24-n%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new i.init(r,t/2)}},l=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],n=0;n<e;n++)r.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new i.init(r,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},f=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,o=e.min(4*t,o),t){for(var u=0;u<t;u+=a)this._doProcessBlock(n,u);u=n.splice(0,t),r.sigBytes-=o}return new i.init(u,o)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=f.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new h.HMAC.init(e,r).finalize(t)}}});var h=r.algo={};return r}(Math);!function(){var e=c,t=(o=e.lib).WordArray,r=o.Hasher,n=[],o=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,o=r[0],a=r[1],i=r[2],s=r[3],u=r[4],l=0;80>l;l++){if(16>l)n[l]=0|e[t+l];else{var c=n[l-3]^n[l-8]^n[l-14]^n[l-16];n[l]=c<<1|c>>>31}c=(o<<5|o>>>27)+u+n[l],c=20>l?c+(1518500249+(a&i|~a&s)):40>l?c+(1859775393+(a^i^s)):60>l?c+((a&i|a&s|i&s)-1894007588):c+((a^i^s)-899497514),u=s,s=i,i=a<<30|a>>>2,a=o,o=c}r[0]=r[0]+o|0,r[1]=r[1]+a|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(o),e.HmacSHA1=r._createHmacHelper(o)}(),function(e){for(var t=c,r=(o=t.lib).WordArray,n=o.Hasher,o=t.algo,a=[],i=[],s=function(e){return 4294967296*(e-(0|e))|0},u=2,l=0;64>l;){var f;e:{f=u;for(var h=e.sqrt(f),d=2;d<=h;d++)if(!(f%d)){f=!1;break e}f=!0}f&&(8>l&&(a[l]=s(e.pow(u,.5))),i[l]=s(e.pow(u,1/3)),l++),u++}var p=[];o=o.SHA256=n.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],f=r[7],h=0;64>h;h++){if(16>h)p[h]=0|e[t+h];else{var d=p[h-15],y=p[h-2];p[h]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[h-7]+((y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10)+p[h-16]}d=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&l^~u&c)+i[h]+p[h],y=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&o^n&a^o&a),f=c,c=l,l=u,u=s+d|0,s=a,a=o,o=n,n=d+y|0}r[0]=r[0]+n|0,r[1]=r[1]+o|0,r[2]=r[2]+a|0,r[3]=r[3]+s|0,r[4]=r[4]+u|0,r[5]=r[5]+l|0,r[6]=r[6]+c|0,r[7]=r[7]+f|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;return r[o>>>5]|=128<<24-o%32,r[14+(o+64>>>9<<4)]=e.floor(n/4294967296),r[15+(o+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=n._createHelper(o),t.HmacSHA256=n._createHmacHelper(o)}(Math),s=(i=c).enc.Utf8,i.algo.HMAC=i.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),i=o.words,u=a.words,l=0;l<r;l++)i[l]^=1549556828,u[l]^=909522486;o.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),l=(u=c).lib.WordArray,u.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var o=0;o<r;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,i=0;4>i&&o+.75*i<r;i++)e.push(n.charAt(a>>>6*(3-i)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,r=this._map;(n=r.charAt(64))&&-1!=(n=e.indexOf(n))&&(t=n);for(var n=[],o=0,a=0;a<t;a++)if(a%4){var i=r.indexOf(e.charAt(a-1))<<a%4*2,s=r.indexOf(e.charAt(a))>>>6-a%4*2;n[o>>>2]|=(i|s)<<24-o%4*8,o++}return l.create(n,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.crypto.utils=c,void 0!==e&&e.exports&&(e.exports=a)},function(e,t,r){"use strict";r(4),e.exports=self.fetch.bind(self)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloudStorage=void 0;var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(5),i=(n=a)&&n.__esModule?n:{default:n};var s="miniApp";t.CloudStorage=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"devt";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,{id:e.id,key:e.key,algorithm:"sha256"},r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),o(t,[{key:"insert",value:function(e){return this.request("POST","",e)}},{key:"update",value:function(e,t){return this.request("PUT","/"+e,t)}},{key:"get",value:function(e){return this.request("GET","/"+e)}}]),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultCoreBridge=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1);var a=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._callbackHelper=t}return n(e,[{key:"_saveCallbackAndProcessMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t&&this._callbackHelper.setCoreCallback(e,t),r&&this._callbackHelper.setErrorCallback(e,r),this._callbackHelper.processMessage(e,null,n)}},{key:"getFriends",value:function(e){this._saveCallbackAndProcessMessage("getFriends",e)}},{key:"getBmBalance",value:function(){var e=this;return new Promise(function(t,r){e._saveCallbackAndProcessMessage("getBmBalance",t,r)})}},{key:"createBet",value:function(e,t){var r=this;return new Promise(function(n,o){r._saveCallbackAndProcessMessage("createBet",n,o,{amount:e,tag:t})})}},{key:"claimBet",value:function(e,t,r){var n=this;return new Promise(function(o,a){n._saveCallbackAndProcessMessage("claimBet",o,a,{userId:e,amount:t,tag:r})})}},{key:"pay",value:function(e,t){var r=this;return new Promise(function(n,o){r._saveCallbackAndProcessMessage("pay",n,o,{userId:e,amount:t})})}}]),e}())(o.defaultCallbackHelper);t.defaultCoreBridge=a},function(e,t,r){"use strict";function n(e,t,r){return t<=e&&e<=r}function o(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}r.r(t),r.d(t,"TextEncoder",function(){return f}),r.d(t,"TextDecoder",function(){return c});var a=-1;function i(e){this.tokens=[].slice.call(e)}i.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():a},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var s=-1;function u(e,t){if(e)throw TypeError("Decoder error");return t||65533}var l="utf-8";function c(e,t){if(!(this instanceof c))return new c(e,t);if((e=void 0!==e?String(e).toLowerCase():l)!==l)throw new Error("Encoding not supported. Only utf-8 is supported");t=o(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function f(e,t){if(!(this instanceof f))return new f(e,t);if((e=void 0!==e?String(e).toLowerCase():l)!==l)throw new Error("Encoding not supported. Only utf-8 is supported");t=o(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}c.prototype={decode:function(e,t){var r;r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=o(t),this._streaming||(this._decoder=new function(e){var t=e.fatal,r=0,o=0,i=0,l=128,c=191;this.handler=function(e,f){if(f===a&&0!==i)return i=0,u(t);if(f===a)return s;if(0===i){if(n(f,0,127))return f;if(n(f,194,223))i=1,r=f-192;else if(n(f,224,239))224===f&&(l=160),237===f&&(c=159),i=2,r=f-224;else{if(!n(f,240,244))return u(t);240===f&&(l=144),244===f&&(c=143),i=3,r=f-240}return r<<=6*i,null}if(!n(f,l,c))return r=i=o=0,l=128,c=191,e.prepend(f),u(t);if(l=128,c=191,r+=f-128<<6*(i-(o+=1)),o!==i)return null;var h=r;return r=i=o=0,h}}({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var l,c=new i(r),f=[];!c.endOfStream()&&(l=this._decoder.handler(c,c.read()))!==s;)null!==l&&(Array.isArray(l)?f.push.apply(f,l):f.push(l));if(!this._streaming){do{if((l=this._decoder.handler(c,c.read()))===s)break;null!==l&&(Array.isArray(l)?f.push.apply(f,l):f.push(l))}while(!c.endOfStream());this._decoder=null}return f.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===f[0]?(this._BOMseen=!0,f.shift()):this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(f)}},f.prototype={encode:function(e,t){e=e?String(e):"",t=o(t),this._streaming||(this._encoder=new function(e){e.fatal;this.handler=function(e,t){if(t===a)return s;if(n(t,0,127))return t;var r,o;n(t,128,2047)?(r=1,o=192):n(t,2048,65535)?(r=2,o=224):n(t,65536,1114111)&&(r=3,o=240);for(var i=[(t>>6*r)+o];r>0;){var u=t>>6*(r-1);i.push(128|63&u),r-=1}return i}}(this._options)),this._streaming=Boolean(t.stream);for(var r,u=[],l=new i(function(e){for(var t=String(e),r=t.length,n=0,o=[];n<r;){var a=t.charCodeAt(n);if(a<55296||a>57343)o.push(a);else if(56320<=a&&a<=57343)o.push(65533);else if(55296<=a&&a<=56319)if(n===r-1)o.push(65533);else{var i=e.charCodeAt(n+1);if(56320<=i&&i<=57343){var s=1023&a,u=1023&i;o.push(65536+(s<<10)+u),n+=1}else o.push(65533)}n+=1}return o}(e));!l.endOfStream()&&(r=this._encoder.handler(l,l.read()))!==s;)Array.isArray(r)?u.push.apply(u,r):u.push(r);if(!this._streaming){for(;(r=this._encoder.handler(l,l.read()))!==s;)Array.isArray(r)?u.push.apply(u,r):u.push(r);this._encoder=null}return new Uint8Array(u)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUIBridge=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1);var a=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._callbackHelper=t}return n(e,[{key:"_saveCallbackAndProcessMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r&&(t?this._callbackHelper.setUiCallback(e,t,r):this._callbackHelper.setCoreCallback(e,r)),this._callbackHelper.processMessage(e,t,n)}},{key:"showTitleInput",value:function(e){this._saveCallbackAndProcessMessage("showTitleInput","default",function(t,r){e(r)})}},{key:"showWebImageSelector",value:function(e,t,r,n){this._saveCallbackAndProcessMessage("showWebImageSelector",e,n,{title:t,imageUrls:r})}},{key:"showGalleryImageSelector",value:function(e,t,r){this._saveCallbackAndProcessMessage("showGalleryImageSelector",e,r,{title:t})}},{key:"oldShowFriendsSelector",value:function(e,t){this._saveCallbackAndProcessMessage("showFriendsSelector",e,t)}},{key:"showFriendsSelector",value:function(e){var t=this;return new Promise(function(r,n){t._saveCallbackAndProcessMessage("showFriendsSelectorPromise","",r,e)})}}]),e}())(o.defaultCallbackHelper);t.defaultUIBridge=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17);Object.defineProperty(t,"defaultUIBridge",{enumerable:!0,get:function(){return n.defaultUIBridge}});var o=r(15);Object.defineProperty(t,"defaultCoreBridge",{enumerable:!0,get:function(){return o.defaultCoreBridge}});var a=r(14);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=r(11);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var s=r(10);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var u=r(7);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var l=r(6);Object.defineProperty(t,"Utils",{enumerable:!0,get:function(){return(e=l,e&&e.__esModule?e:{default:e}).default;var e}})}]);